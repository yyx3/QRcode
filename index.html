<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>ç–¯æœVPP</title>
  
  <script>
    (function() {
      var ua = navigator.userAgent.toLowerCase();
      var isWeChat = ua.includes('micromessenger');
      var isQQ = ua.includes('qq/') || ua.includes('mqqbrowser') || ua.includes('qqbrowser');
      
      if (isWeChat || isQQ) {
        // å¦‚æœæ˜¯å†…åµŒæµè§ˆå™¨ï¼Œç«‹å³è¦†ç›–é¡µé¢å†…å®¹ä¸ºæç¤ºé¡µ
        document.write(`
          <!DOCTYPE html>
          <html lang="zh-CN">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
            <title>ç³»ç»Ÿæç¤º</title>
            <style>
              :root { --bg: #f3f4f6; --card-bg: rgba(255, 255, 255, 0.92); --card-border: rgba(15, 23, 42, 0.08); --text-primary: #111827; --text-secondary: #6b7280; --primary-gradient: linear-gradient(135deg, #0A84FF 0%, #5E5CE6 100%); }
              * { box-sizing: border-box; }
              body { font-family: "PingFang SC", "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; min-height: 100vh; background: radial-gradient(circle at top, #e5edff 0%, #f9fafb 60%, #e5e7eb 100%); color: var(--text-primary); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 32px 16px; overflow: hidden; position: relative; }
              .noise-layer { position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='noStitch' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E"); mix-blend-mode: soft-light; pointer-events: none; z-index: -1; }
              .card { width: 100%; max-width: 360px; background: var(--card-bg); border-radius: 26px; padding: 24px 22px 20px; border: 1px solid var(--card-border); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); box-shadow: 0 18px 45px rgba(15, 23, 42, 0.12), 0 0 0 1px rgba(255, 255, 255, 0.5); text-align: center; animation: cardIn 0.45s cubic-bezier(0.2, 0.8, 0.2, 1); }
              .icon-wrap { width: 52px; height: 52px; border-radius: 18px; background: var(--primary-gradient); display: flex; align-items: center; justify-content: center; margin: 4px auto 14px; box-shadow: 0 10px 22px rgba(37, 99, 235, 0.45); }
              .pill { display: inline-flex; align-items: center; justify-content: center; padding: 3px 10px; border-radius: 999px; font-size: 11px; color: var(--text-secondary); border: 1px solid rgba(148, 163, 184, 0.4); background: rgba(249, 250, 251, 0.9); margin-bottom: 8px; }
              .title { font-size: 18px; font-weight: 600; margin-bottom: 8px; letter-spacing: 0.2px; }
              .desc { font-size: 14px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 16px; }
              .desc .highlight { color: #111827; font-weight: 600; }
              .steps { font-size: 13px; color: var(--text-secondary); text-align: left; margin: 0 auto 16px; max-width: 280px; line-height: 1.7; }
              .steps li { margin-bottom: 4px; }
              .btn-row { display: flex; flex-direction: column; gap: 8px; }
              .btn-main { border-radius: 999px; padding: 10px 14px; border: none; outline: none; font-size: 15px; font-weight: 500; color: #fff; background-image: var(--primary-gradient); box-shadow: 0 8px 18px rgba(37, 99, 235, 0.45); }
              .btn-secondary { border-radius: 999px; padding: 9px 12px; font-size: 13px; color: var(--text-secondary); background: #f9fafb; border: 1px solid rgba(209, 213, 219, 0.9); }
              @keyframes cardIn { from { opacity: 0; transform: translateY(16px) scale(0.98); } to { opacity: 1; transform: translateY(0) scale(1); } }
            </style>
          </head>
          <body>
            <div class="noise-layer"></div>
            <div class="card">
              <div class="icon-wrap">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="9"></circle>
                  <polygon points="15.5 8.5 13.6 13.6 8.5 15.5 10.4 10.4 15.5 8.5"></polygon>
                </svg>
              </div>
              <div class="pill">ç³»ç»Ÿæç¤º</div>
              <div class="title">å½“å‰ç¯å¢ƒä¸æ”¯æŒ</div>
              <div class="desc">
                æ£€æµ‹åˆ°æ‚¨æ­£åœ¨ä½¿ç”¨ <span class="highlight">å¾®ä¿¡æˆ– QQ å†…ç½®æµè§ˆå™¨</span> è®¿é—®ã€‚<br>
                ä¸ºäº†ä¿éšœæ”¯ä»˜å®‰å…¨å’Œç¨³å®šï¼Œæœ¬é¡µé¢æš‚ä¸æ”¯æŒåœ¨å½“å‰ç¯å¢ƒä¸­æ‰“å¼€ã€‚
              </div>
              <ul class="steps">
                <li>1. å¤åˆ¶å½“å‰é¡µé¢é“¾æ¥ï¼›</li>
                <li>2. æ‰“å¼€æ‰‹æœºè‡ªå¸¦æµè§ˆå™¨ï¼ˆå¦‚ Safari / ç³»ç»Ÿæµè§ˆå™¨ï¼‰ï¼›</li>
                <li>3. åœ¨åœ°å€æ ç²˜è´´é“¾æ¥å¹¶è®¿é—®ã€‚</li>
              </ul>
              <div class="btn-row">
                <button class="btn-main">è¯·å¤åˆ¶é“¾æ¥åˆ°æµè§ˆå™¨æ‰“å¼€</button>
                <div class="btn-secondary">å¦‚ä»æœ‰é—®é¢˜ï¼Œå¯åœ¨æµè§ˆå™¨ä¸­è”ç³»åœ¨çº¿å®¢æœ</div>
              </div>
            </div>
          </body>
          </html>
        `);
        document.close();
        // é˜»æ­¢åç»­é¡µé¢æ¸²æŸ“
        throw new Error("Redirected to warning page");
      }
    })();
  </script>

  <style>
    :root {
      --bg: #f3f4f6;
      --card-bg: rgba(255, 255, 255, 0.96);
      --card-border: rgba(15, 23, 42, 0.08);
      --text-primary: #111827;
      --text-secondary: #6b7280;
      --primary-gradient: linear-gradient(135deg, #0A84FF 0%, #5E5CE6 100%);
      --accent-soft: #e5edff;
    }
    * { box-sizing: border-box; }
    body { 
      font-family: "PingFang SC", "SF Pro Display", -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0; min-height: 100vh;
      background: radial-gradient(circle at top, #e5edff 0%, #f9fafb 60%, #e5e7eb 100%);
      color: var(--text-primary);
      display: flex; flex-direction: column; align-items: center;
      padding: 40px 18px 26px; overflow-x: hidden; position: relative;
    }
    .noise-layer {
      position: fixed; inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 160 160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='noStitch' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");
      mix-blend-mode: soft-light; pointer-events: none; z-index: -1;
    }
    .container { width: 100%; max-width: 420px; z-index: 1; }
    header { margin-bottom: 24px; text-align: center; animation: fadeInDown 0.7s cubic-bezier(0.2, 0.8, 0.2, 1); }
    .title-pill { display: inline-flex; align-items: center; justify-content: center; padding: 3px 10px; border-radius: 999px; font-size: 11px; color: var(--text-secondary); border: 1px solid rgba(148, 163, 184, 0.4); background: rgba(249, 250, 251, 0.95); margin-bottom: 8px; }
    h1 { font-size: 28px; font-weight: 600; margin: 0; background: linear-gradient(to bottom, #111827 40%, #4b5563 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; letter-spacing: 0.3px; }
    .subtitle { font-size: 13px; color: var(--text-secondary); margin-top: 8px; font-weight: 400; }
    .nav-group { display: flex; flex-direction: column; gap: 12px; animation: fadeInUp 0.7s cubic-bezier(0.2, 0.8, 0.2, 1) 0.05s backwards; }
    .nav-item { position: relative; display: flex; align-items: center; justify-content: space-between; padding: 16px 18px; background: var(--card-bg); backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px); border: 1px solid var(--card-border); border-radius: 20px; text-decoration: none; color: var(--text-primary); overflow: hidden; transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1); box-shadow: 0 10px 24px rgba(15, 23, 42, 0.08); }
    .nav-item::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.45), transparent); opacity: 0.6; }
    .nav-item:active { transform: scale(0.98); box-shadow: 0 6px 16px rgba(15, 23, 42, 0.14); }
    .nav-content { display: flex; align-items: center; gap: 12px; }
    .nav-icon { width: 32px; height: 32px; border-radius: 12px; background: var(--accent-soft); display: flex; align-items: center; justify-content: center; font-size: 18px; }
    .nav-text-main { font-size: 15px; font-weight: 500; }
    .nav-text-sub { font-size: 11px; color: var(--text-secondary); margin-top: 2px; }
    .nav-right { display: flex; align-items: center; gap: 8px; font-size: 11px; color: var(--text-secondary); white-space: nowrap; }
    .latency-label { font-size: 11px; padding: 2px 6px; border-radius: 999px; background: #eef2ff; color: #4f46e5; }
    .nav-arrow { opacity: 0.45; font-size: 13px; color: #9ca3af; }
    .tag-recommend { position: absolute; top: 10px; right: 12px; font-size: 10px; padding: 2px 8px; border-radius: 999px; background: #f97316; color: #fff; box-shadow: 0 4px 10px rgba(248, 113, 113, 0.4); display: none; }
    .nav-item.recommended { border-color: rgba(248, 113, 22, 0.4); box-shadow: 0 12px 26px rgba(248, 113, 22, 0.28); }
    .footer-links { margin-top: 22px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; animation: fadeInUp 0.7s cubic-bezier(0.2, 0.8, 0.2, 1) 0.12s backwards; }
    .footer-btn { padding: 12px 24px; font-size: 16px; color: var(--text-secondary); background: #f9fafb; border-radius: 999px; text-decoration: none; border: 1px solid rgba(209, 213, 219, 0.9); transition: all 0.2s; }
    .footer-btn:hover { background: #e5edff; color: #111827; border-color: #93c5fd; }
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-18px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
    @media (max-width: 360px) { body { padding-top: 30px; } .nav-item { padding-inline: 14px; } }
  </style>
</head>
<body>
  <div class="noise-layer"></div>

  <div class="container">
    <header>
      <div class="title-pill">ç–¯æœVPP Â· å®‰å…¨å¯¼èˆª</div>
      <h1>é€‰æ‹©ä¸‹å•é€šé“</h1>
      <div class="subtitle">å·²ä¸ºä½ è‡ªåŠ¨æµ‹è¯•å½“å‰ç½‘ç»œä¸‹å„é€šé“å»¶è¿Ÿï¼Œä¼˜å…ˆä½¿ç”¨æ¨èçº¿è·¯</div>
    </header>

    <div class="nav-group">
      <a href="https://ap.apnfenguo.top/" class="nav-item" target="_blank" data-line-id="line1">
        <span class="tag-recommend" data-tag-for="line1">æ¨è</span>
        <div class="nav-content">
          <div class="nav-icon">âš¡ï¸</div>
          <div>
            <div class="nav-text-main">æé€Ÿé€šé“ â‘ </div>
            <div class="nav-text-sub">ä¼˜å…ˆæ¨è Â· è¾ƒé«˜æˆåŠŸç‡</div>
          </div>
        </div>
        <div class="nav-right">
          <span class="latency-label" data-latency-id="line1">æµ‹è¯•ä¸­â€¦</span>
          <div class="nav-arrow">â€º</div>
        </div>
      </a>

      <a href="https://xx.fenguobom.top/" class="nav-item" target="_blank" data-line-id="line2">
        <span class="tag-recommend" data-tag-for="line2">æ¨è</span>
        <div class="nav-content">
          <div class="nav-icon">ğŸ’</div>
          <div>
            <div class="nav-text-main">å¤‡ç”¨é€šé“ â‘¡</div>
            <div class="nav-text-sub">çº¿è·¯ä¼˜åŒ– Â· ç¨³å®šæ€§æ›´ä½³</div>
          </div>
        </div>
        <div class="nav-right">
          <span class="latency-label" data-latency-id="line2">æµ‹è¯•ä¸­â€¦</span>
          <div class="nav-arrow">â€º</div>
        </div>
      </a>

      <a href="https://www.payvpp.top/" class="nav-item" target="_blank" data-line-id="line3">
        <span class="tag-recommend" data-tag-for="line3">æ¨è</span>
        <div class="nav-content">
          <div class="nav-icon">ğŸ›¡ï¸</div>
          <div>
            <div class="nav-text-main">å¤‡ç”¨é€šé“ â‘¢</div>
            <div class="nav-text-sub">å‰ä¸¤æ¡æ— æ³•ä½¿ç”¨æ—¶å†å°è¯•</div>
          </div>
        </div>
        <div class="nav-right">
          <span class="latency-label" data-latency-id="line3">æµ‹è¯•ä¸­â€¦</span>
          <div class="nav-arrow">â€º</div>
        </div>
      </a>
    </div>

    <div class="footer-links">
      <a href="https://tawk.to/chat/66addd061601a2195ba04b79/1i4bieonn" class="footer-btn" target="_blank">åœ¨çº¿å®¢æœ</a>
      <a href="/course.html" class="footer-btn" target="_blank">ä½¿ç”¨æ•™ç¨‹</a>
    </div>
  </div>

  <script>
    // 3. å»¶è¿Ÿæµ‹è¯•é€»è¾‘ (ä¿ç•™åŸé€»è¾‘)
    (function () {
      console.log('Payment center page loaded');
      const lines = [
        { id: 'line1', url: 'https://ap.apnfenguo.top/' },
        { id: 'line2', url: 'https://xx.fenguobom.top/' },
        { id: 'line3', url: 'https://www.payvpp.top/' },
      ];

      function testLatency(line) {
        const start = performance.now();
        // ä»…æ¢æµ‹è¿é€šæ€§ï¼Œmode: 'no-cors'
        return fetch(line.url, { method: 'GET', mode: 'no-cors', cache: 'no-store' })
          .catch(() => null)
          .then(() => {
            const end = performance.now();
            const latency = Math.round(end - start);
            if (!isFinite(latency) || latency <= 0) return null;
            return latency;
          });
      }

      async function runTests() {
        const results = {};
        for (const line of lines) {
          const el = document.querySelector('[data-latency-id="' + line.id + '"]');
          if (el) el.textContent = 'æµ‹è¯•ä¸­â€¦';
        }

        await Promise.all(lines.map(async (line) => {
          const latency = await testLatency(line);
          results[line.id] = latency;

          const labelEl = document.querySelector('[data-latency-id="' + line.id + '"]');
          if (!labelEl) return;

          if (latency === null) {
            labelEl.textContent = 'ä¸å¯ç”¨';
            labelEl.style.background = '#fee2e2';
            labelEl.style.color = '#b91c1c';
          } else {
            labelEl.textContent = latency + ' ms';
          }
        }));

        // é€‰å‡ºæœ€ä¼˜çº¿è·¯
        const validLatencies = Object.entries(results).filter(([_, v]) => v !== null);
        if (validLatencies.length === 0) return;

        validLatencies.sort((a, b) => a[1] - b[1]);
        const bestId = validLatencies[0][0];

        const bestCard = document.querySelector('.nav-item[data-line-id="' + bestId + '"]');
        const tag = document.querySelector('.tag-recommend[data-tag-for="' + bestId + '"]');
        if (bestCard && tag) {
          bestCard.classList.add('recommended');
          tag.style.display = 'inline-block';
        }
      }

      window.addEventListener('load', () => {
        setTimeout(runTests, 300);
      });
    })();
  </script>
</body>
</html>
